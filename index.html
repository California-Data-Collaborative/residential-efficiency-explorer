<!DOCTYPE html>
<html lang="en">
<head>
  <script type="text/javascript" src="js/ss_config.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', config.trackingID, 'auto');
  ga('send', 'pageview');

  </script>
  <title>CaDC Efficiency Explorer</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/foundation-icons.css" /> -->
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" /> -->
  
  
  <link rel="stylesheet" href="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/themes/css/cartodb.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="css/base-jquery-ui.css">
  <link rel="stylesheet" href="css/jquery-bootstrap-datepicker.css">
  <link rel="stylesheet" href="css/metricsgraphics.css">
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header col-md-4">
        <a class="navbar-brand" href="http://californiadatacollaborative.com/">
          CALIFORNIA DATA COLLABORATIVE
        </a>
      </div>
      <ul class="nav navbar-nav">
        <!-- I use href="javascript:..." because href default cursor property is pointer -->
        <li><a id='aboutLink' href="javascript: smoothScroll('#extraUtility');">About</a></li>
        <li><a id='intraULink' href="javascript: smoothScroll('#intraUtility');">Efficiency Explorer</a></li>
      </ul>
    </div>
  </nav>

  <!-- Content -->
  <div class="container-fluid">

    <div id='extraUtility' class='section row'>
      <div class='col-md-12'>
        <h1>Context:</h1>
        <p>
          In May 2016, Governor Brown issued Executive Order B-37-16. The EO calls for the development of <b>water use targets customized to the unique conditions of each urban water agency as part of a new, permanent efficiency framework.</b>
        </p>
        <p>
         Standards for efficiency are being developed by the Department of Water Resources and the Water Board <b>in consultation with urban water suppliers</b> and other stakeholder groups.
       </p>

       <p>
        At present, the CaDC Efficiency Explorer focuses on the <em>residential usage</em> component of an agency's efficiency target. This component will vary according to:

        <table  style="width:100%">
          <tr>
            <th>Location-Specific Factors</th>
            <th>Policy Decisions</th>
          </tr>
          <tr>
            <td>Population</td>
            <td>Reasonable gallons per capita per day usage (GPCD)</td>
          </tr>
          <tr>
            <td>Irrigable area</td>
            <td>The natural water use characteristics of appropriate landscape (ET Adjustment Factor)</td>
          </tr>
          <tr>
            <td>Evapotranspiration</td>
            <td></td>
          </tr>
        </table>
      </p>

      <h1>Instructions:</h1>

      <p>
        This tool aims to serve water managers by both providing an intuitive platform for exploring the new efficiency targets, and by enabling instantaneous access to data for different water use policy scenarios.
      </p>
      <p>
        By setting values for GPCD (gallons per capita per day) and ET Adjustment Factor, managers can use this tool to investigate how different standards for residential water use affect their agencies over different periods of time.
      </p>
      <p>
        Specifically, the tool consists of a map for selecting a census block, and a Scenario Builder panel for (1) selecting Date Range, GPCD, and ET Adjustment Factor; and (2) viewing results (residential usage target, number of acre-feet over or under target for current scenario, and a time series graph for comparing target usage to actual usage over time). 
      </p>
      <p>
        Use the navigation bar links above to scroll between the tool and this instructions page. For best experience, please use Chrome and set your browser window to full screen.
      </p>

    </div>
  </div>

  <div id='intraUtility' class='section row'>
    <div id='scenarioBuilder' class="col-md-4">
      <div id="tsSection">
        <div id="tsTitles">
          <h2>Scenario Builder</h2>
          <div class="form-group">
            <label for="hrName">FIPS code</label>
            <div class="input-group">
              <span class="input-group-addon" id="search-addon">
                <i class="glyphicon glyphicon-search"></i>
              </span>
              <input type="text" class="form-control" id="hrName" aria-describedby="search-addon">
            </div>
          </div>
          <p style="display: inline" id='summarySentence'>
            <b>Residential Use Target: </b><div style="display: inline" id="targetValue"></div><br>
            <b>Residential Use: </b> <div style="display: inline" id="usage"></div><br>
            <b>Efficiency: </b><div style="display: inline" id="efficiency"></div>
          </p>
        </div>
        <div id='tsContainer'>
          <div id="ts"></div>
          <div id="tsLegend"></div>
        </div>
      </div>

      <div id="filters">
        <div id="dateSelection">
          <div class="form-group">
            <label for="cal">Date Range</label>
            <div class="input-group">
              <span class="input-group-addon" id="cal-addon">
                <i class="glyphicon glyphicon-calendar"></i>
                <i class="glyphicon glyphicon-resize-horizontal"></i>
              </span>
              <input type="text" class="form-control" id="cal" aria-describedby="cal-addon" disabled>
            </div>
          </div>
          <div class="form-group">
            <div id='range_slider'></div>
          </div>
        </div>
        <div id="coefficientSelection" class="row">
          <div class="form-group col-md-6 halfrightpadding">
            <label for="gpcd">GPCD</label>
            <div class="input-group">
              <span class="input-group-addon" id="gpcd-addon">
                <i class="glyphicon glyphicon-tint"></i>
                <i class="glyphicon glyphicon-user"></i>
              </span>
              <input type="text" class="form-control" id="gpcd" aria-describedby="gpcd-addon">
            </div>
          </div>
          <div class="form-group col-md-6 halfleftpadding">
            <label for="pf">ET Adjustment Factor</label>
            <div class="input-group">
              <span class="input-group-addon" id="pf-addon">
                <i class="glyphicon glyphicon-tint"></i>
                <i class="glyphicon glyphicon-leaf"></i>
              </span>
              <input type="text" class="form-control" id="pf" aria-describedby="pf-addon">
            </div>
          </div>
        </div>
        <label for="dataSelection">Source Data</label>
        <div id="dataSelection">
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon fixed-width" id="popData-addon">
                Population
                <!-- <i class="glyphicon glyphicon-user"></i> -->
              </span>
              <input type="text" class="form-control" id="popData" aria-describedby="popData-addon" disabled>
              <div class="input-group-btn dropup">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li><a id="census_block_pop" href="javascript: dataToggle('#popData', '#census_block_pop');">2010 Census Block Population</a></li>
                  <li><a id="hhsize" href="javascript: dataToggle('#popData', '#hhsize');">Household Size (Sum)</a></li>
                </ul>
              </div>
            </div>
          </div>
        <!--   <div class="form-group">
            <div class="input-group">

              <span class="input-group-addon fixed-width" id="classData-addon">
                Customer Class
                <i class="glyphicon glyphicon-user"></i>
              </span>
              <input type="text" class="form-control" id="classData" aria-describedby="classData-addon" disabled>
              <div class="input-group-btn dropup">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li class="dropdown-header">Customer Class</li>
                  <li><a href="#">RESIDENTIAL_SINGLE</a></li>
                  <li><a href="#">RESIDENTIAL_MULTI</a></li>
                  <li><a href="#">BOTH</a></li>
                </ul>
              </div>
            </div>
          </div> -->
         <!--  <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon fixed-width" id="laData-addon">
                Landscaped Area
                
              </span>
              <input type="text" class="form-control" id="laData" aria-describedby="laData-addon" disabled>
                 <div class="input-group-btn dropup">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li><a href="#">Utility Provided</a></li>
                  <li><a href="#">CGU Provided</a></li>
                  <li><a href="#">Combination</a></li>
                </ul>
              </div>
            </div>
          </div> -->
    <!--       <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon fixed-width" id="etData-addon">
                Evapotranspiration
              </span>
              <input type="text" class="form-control" id="etData" aria-describedby="etData-addon"disabled>
                 <div class="input-group-btn dropup">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li><a href="#">Utility Provided</a></li>
                  <li><a href="#">Aggregated CIMIS</a></li>
                  <li><a href="#">Combination</a></li>
                </ul>
              </div>
            </div>
          </div> -->

        </div>
      </div>
    </div>
    <div class="col-md-8 nopadding">
      <div id="map"></div>
    </div>
  </div>

</div>

<script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src='js/libs/metricsgraphics.js'></script>
<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<script type="text/javascript" src="js/objects.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script>
window.onload = function() {
  dataSetup(main);
};
</script>

</body>
</html>

