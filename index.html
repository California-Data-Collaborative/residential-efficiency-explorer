<!DOCTYPE html>
<html lang="en">
<head>
  <script type="text/javascript" src="js/ss_config.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', config.trackingID, 'auto');
  ga('send', 'pageview');

  </script>
  <title>CaDC Efficiency Explorer v1.4</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/foundation-icons.css" /> -->
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" /> -->


  <link rel="stylesheet" href="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/themes/css/cartodb.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="css/base-jquery-ui.css">
  <link rel="stylesheet" href="css/jquery-bootstrap-datepicker.css">
  <link rel="stylesheet" href="css/metricsgraphics.css">
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header col-md-4">
        <a class="navbar-brand" href="http://californiadatacollaborative.com/">
          CALIFORNIA DATA COLLABORATIVE
        </a>
      </div>
      <ul class="nav navbar-nav col-md-6">
        <!-- I use href="javascript:..." because href default cursor property is pointer -->
        <li><a id='aboutLink' href="javascript: smoothScroll('#extraUtility');">About</a></li>
        <li><a id='intraULink' href="javascript: smoothScroll('#intraUtility');">Efficiency Explorer v1.4</a></li>
      </ul>
      <div class="navbar-header col-md-2">
        <a id='argoBrand' class="navbar-brand" href="http://argolabs.org">
          Powered by ARGO
        </a>
      </div>
    </div>
  </nav>

  <!-- Content -->
  <div class="container-fluid">

    <div id='extraUtility' class='section row'>
      <div class='col-md-12'>
        <div class='row' style='padding-top: 15px;'>
          <div class='col-md-6 halfrightpadding' >
            <div class="panel panel-default equation">
              <div class="panel-heading">
                <h3 class="panel-title centered">
                  Indoor Budget
                </h3>
              </div>
              <div class="panel panel-horizontal">
               <div class="panel-body">Sum of<br>days in period</div>
               <div class="panel-body">x</div>
               <div class="panel-body clickable">
               <br>GPCD<br>&nbsp
             </div>
             <div class="panel-body">x</div>
             <div class="panel-body clickable">
             <br>Population<br>&nbsp</div>
           </div>
           <div class="panel-footer centered">
            <i class="glyphicon glyphicon-tint"></i>
            <i class="glyphicon glyphicon-user"></i>
          </div>
        </div>
      </div>
      <div class='col-md-6 halfleftpadding'>
        <div class="panel panel-default equation">
          <div class="panel-heading">
            <h3 class="panel-title centered">
              Outdoor Budget
            </h3>
          </div>
          <div class="panel panel-horizontal">
           <div class="panel-body clickable">
           Sum of daily reference evapotranspiration</div>
           <div class="panel-body">x</div>
           <div class="panel-body clickable">
           ET Adjustment Factor</div>
           <div class="panel-body">x</div>
           <div class="panel-body clickable">
           Residential landscaped area</div>
           <div class="panel-body">x</div>
           <div class="panel-body">Unit Conversion Factor</div>
         </div>
         <div class="panel-footer centered">
          <i class="glyphicon glyphicon-tint"></i>
          <i class="glyphicon glyphicon-leaf"></i>
        </div>
      </div>
    </div>
  </div>
  <h1>Context:</h1>
  <p>
    In May 2016, Governor Brown issued Executive Order B-37-16. The EO calls for the development of <b>water use targets customized to the unique conditions of each urban water agency as part of a new, permanent efficiency framework.</b>
  </p>
  <p>
   Standards for efficiency are being developed by the Department of Water Resources and the Water Board <b>in consultation with urban water suppliers</b> and other stakeholder groups.
 </p>

 <p>
  At present, the Efficiency Explorer focuses on the <em>residential use</em> component of an agency's efficiency target. This component is calculated as the sum of indoor and outdoor residential water use budgets, and can vary according to pending policy decisions (GPCD and ET Adjustment Factor) as well as unique agency conditions. The parameters of these two budgets are displayed in the labeled panels above.
</p>

<!-- <p>
  The parameters of these two budgets are displayed in the labeled panels above. <b class="highlight">Click each parameter for descriptions, data sources, and data quality considerations</b> for this iteration of the CaDC Efficiency Explorer.
</p> -->

<h1>Instructions:</h1>

<p>
  This tool aims to serve water managers by both providing an intuitive platform for exploring the new efficiency targets, and by enabling instantaneous access to data for different water use policy scenarios.
</p>
<p>
  By setting values for GPCD (gallons per capita per day) and ET Adjustment Factor, managers can use this tool to investigate how different standards for residential water use affect their agencies over different periods of time.
</p>
<p>
  <ul>
          <li>
            Use the <b>Scenario Builder</b> panel to:
            <ul>
              <li>Set scenario parameters
                <ul>
                  <li><b>Date Range</b> - by clicking and dragging the slider knobs</li>
                  <li><b>GPCD</b> and <b>ET Adjustment Factor</b> - by typing values in the associated forms and pressing enter</li>
                </ul>
              </li>
              <li>View results for current scenario for selected Census Block <b>(FIPS Code)</b>
                <ul>
                  <li><b>Residential Use Target:</b> - the residential water use efficiency target calculated using the selected indoor and outdoor water efficiency standards</li>
                  <li><b>Residential Use</b> - the total water use reported by the supplier multiplied by the percentage that went to residential customers</li>
                  <li><b>Efficiency</b> - the number of acre-feet (and percentage) over or within efficiency target. Negative percentages represent percentage within goal</li>
                  <!-- <li><b>Data Quality</b> - a 3-tiered flag indicating supplier-level data quality concerns</li> -->
                  <li>Time Series Graph - the historical relationship between efficiency target and actual use.<!--  Grey bands are included around efficiency goal line to indicate confidence region --></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            Use the map panel to:
            <ul>
              <li>View geographic context</li>
              <li>Select census blocks</li>
              <li>View demographic statistics</li>
                <ul>
                  <li>Census Block-Level (2010)</li>
                    <ul>
                      <li>Population</li>
                    </ul>
                  <li>Census Blockgroup-level (2015)</li>
                    <ul>
                      <li>Median Income</li>
                      <li>Median Year Structure Built</li>
                      <li>Characteristic Education</li>
                      <li>Primary Limited English Speaking Household Language</li>
                  </ul>
                </ul>
              <!-- <li>View the <b>Big Picture</b>
                <ul>
                  <li><b>SBx7-7 2020 Residential Efficiency Goal</b> - the amount of water in acre-feet for the previous twelve months for suppliers with SBx7-7 efficiency goals. The Residential Efficiency Goal is calculated as the percent residential reported in the supplier report multiplied by the total SBx7-7 goal for that supplier</li>
                  <li><b>Total Residential Efficiency Goal</b> - the sum of all residential goals for the same suppliers as the SBx7 2020 Residential Goals for the previous twelve months</li>
                  <li><b>Total Residential Use</b> - the sum of all residential use for the same suppliers as the SBx7-7 2020 Residential Efficiency Goal for the previous twelve months</li>
                </ul>
              </li> -->
            </ul>
          </li>
        </ul>
  <!-- Specifically, the tool consists of a map for selecting a census block, and a Scenario Builder panel for (1) selecting Date Range, GPCD, and ET Adjustment Factor; and (2) viewing results (residential use target, number of acre-feet over or under target for current scenario, and a time series graph for comparing target use to actual use over time).  -->
</p>
<p>
  Use the navigation bar links above to scroll between the tool and this instructions page. For best experience, please use Chrome and set your browser window to full screen.
</p>

</div>
</div>

<div id='intraUtility' class='section row'>
  <div id='scenarioBuilder' class="col-md-4">
    <div id="tsSection">
      <div id="tsTitles">
        <h2>Scenario Builder</h2>
        <div class="form-group">
          <label for="hrName">FIPS Code</label>
          <div class="input-group">
            <span class="input-group-addon" id="search-addon">
              <i class="glyphicon glyphicon-search"></i>
            </span>
            <input type="text" class="form-control" id="hrName" aria-describedby="search-addon">
          </div>
        </div>
        <p style="display: inline" id='summarySentence'>
          <!-- <b>Population: </b> <div style="display: inline" id="blockPop"></div><br> -->
          <b>Landscaped Area: </b> <div style="display: inline" id="irrArea"></div><br>
          <b>Residential Use: </b> <div style="display: inline" id="usage"></div><br>
          <b>Residential Use Target: </b><div style="display: inline" id="targetValue"></div><br>
          <b>Efficiency: </b><div style="display: inline" id="efficiency"></div>
        </p>
      </div>
      <div id='tsContainer'>
        <div id="ts"></div>
        <div id="tsLegend"></div>
      </div>
    </div>

    <div id="filters">
      <div id="dateSelection">
        <div class="form-group">
          <label for="cal">Date Range</label>
          <div class="input-group">
            <span class="input-group-addon" id="cal-addon">
              <i class="glyphicon glyphicon-calendar"></i>
              <i class="glyphicon glyphicon-resize-horizontal"></i>
            </span>
            <input type="text" class="form-control" id="cal" aria-describedby="cal-addon" disabled>
          </div>
        </div>
        <div class="form-group">
          <div id='range_slider'></div>
        </div>
      </div>
      <div id="coefficientSelection" class="row">
        <div class="form-group col-md-6 halfrightpadding">
          <label for="gpcd">GPCD</label>
          <div class="input-group">
            <span class="input-group-addon" id="gpcd-addon">
              <i class="glyphicon glyphicon-tint"></i>
              <i class="glyphicon glyphicon-user"></i>
            </span>
            <input type="text" class="form-control" id="gpcd" aria-describedby="gpcd-addon">
          </div>
        </div>
        <div class="form-group col-md-6 halfleftpadding">
          <label for="pf">ET Adjustment Factor</label>
          <div class="input-group">
            <span class="input-group-addon" id="pf-addon">
              <i class="glyphicon glyphicon-tint"></i>
              <i class="glyphicon glyphicon-leaf"></i>
            </span>
            <input type="text" class="form-control" id="pf" aria-describedby="pf-addon">
          </div>
        </div>
      </div>
      <label for="dataSelection">Source Data</label>
      <div id="dataSelection">
        <div class="form-group">
          <div class="input-group">

            <span class="input-group-addon fixed-width" id="popData-addon">
              Population
              <!-- <i class="glyphicon glyphicon-user"></i> -->
            </span>
            <div>
              <input type="text" class="form-control" id="popData" aria-describedby="popData-addon" disabled>
            </div>
            <div class="input-group-btn dropup">
              <a tabindex="0" class="btn btn-default" id="popData_wrapper" data-toggle="popover" data-title="Data Source Note" aria-expanded="false"><i class="glyphicon glyphicon-info-sign"></i>
              </a>
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="glyphicon glyphicon-menu-hamburger"></i></button>
              <ul class="dropdown-menu dropdown-menu-right">
                <li><a id="census_block_pop" href="javascript: dataToggle('#popData', '#census_block_pop');">Census Block Population (2010)</a></li>
                <li><a id="hhsize" href="javascript: dataToggle('#popData', '#hhsize');">Household Size (Sum)</a></li>
              </ul>
            </div>
          </div>
        </div>
        <!--   <div class="form-group">
            <div class="input-group">

              <span class="input-group-addon fixed-width" id="classData-addon">
                Customer Class
                <i class="glyphicon glyphicon-user"></i>
              </span>
              <input type="text" class="form-control" id="classData" aria-describedby="classData-addon" disabled>
              <div class="input-group-btn dropup">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li class="dropdown-header">Customer Class</li>
                  <li><a href="#">RESIDENTIAL_SINGLE</a></li>
                  <li><a href="#">RESIDENTIAL_MULTI</a></li>
                  <li><a href="#">BOTH</a></li>
                </ul>
              </div>
            </div>
          </div> -->
         <!--  <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon fixed-width" id="laData-addon">
                Landscaped Area

              </span>
              <input type="text" class="form-control" id="laData" aria-describedby="laData-addon" disabled>
                 <div class="input-group-btn dropup">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li><a href="#">Utility Provided</a></li>
                  <li><a href="#">CGU Provided</a></li>
                  <li><a href="#">Combination</a></li>
                </ul>
              </div>
            </div>
          </div> -->
    <!--       <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon fixed-width" id="etData-addon">
                Evapotranspiration
              </span>
              <input type="text" class="form-control" id="etData" aria-describedby="etData-addon"disabled>
                 <div class="input-group-btn dropup">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li><a href="#">Utility Provided</a></li>
                  <li><a href="#">Aggregated CIMIS</a></li>
                  <li><a href="#">Combination</a></li>
                </ul>
              </div>
            </div>
          </div> -->

        </div>
      </div>
    </div>
    <div class="col-md-8 nopadding">
      <div id="map"></div>
    </div>
  </div>

</div>

<script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src='js/libs/metricsgraphics.js'></script>
<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script type="text/javascript" src="js/objects.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script>
window.onload = function() {
  dataSetup(main);
};
</script>

</body>
</html>
